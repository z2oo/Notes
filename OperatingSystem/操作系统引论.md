# 操作系统引论
**操作系统(Operating System)OS**是配置在计算机硬件上的**第一层软件**，是对硬件系统的首次扩充  
其主要作用是**管理好这些设备，提高它们的利用率和系统的吞吐量，并为用户和应用程序提供一个简单的接口，便于用户使用**  

# 操作系统的目标和作用
## 操作系统的目标
在计算机系统上配置操作系统，其主要目标是：**方便性**、**有效性**、**可扩充性**和**开放性**  
  
## 操作系统的作用
### 1. OS作为用户与计算机硬件系统之间的接口
用户可通过三种方式使用计算机，即
1. **命令方式**
2. **系统调用方式(通过应用程序)**
3. **图标—窗口方式**
### 2. OS作为计算机系统资源的管理者
在一个计算机系统中，通常都含有多种硬件和软件资源。归纳起来可将这些资源分为四类： 处理机、存储器、IO设备以及文件(数据和程序)   

相应地，OS的主要功能也正是对这四类资源进行有效的管理。  

- **处理机管理**：是用于分配和控制处理机
- **存储器管理**：主要负责内存的分配与回收
- **I/O设备管理**：是负责I/O设备的分配(回收)与操纵
- **文件管理**：是用于实现对文件的存取、共享和保护  

可见，OS的确是**计算机系统资源的管理者**  

### 3. OS实现了对计算机资源的抽象
对于一台裸机(完全无软件的计算机系统)，由于它向用户提供的仅是硬件接口(物理接口)，因此，用户必须对物理接口的实现细节有充分的了解，这就致使该物理机器难于广泛使用  

为了方便用户使用I/O设备，人们在裸机上覆盖上**一层I/O设备管理软件**，由它来实现对I/O设备操作的细节，并向上将I/O设备抽象为一组数据结构以及一组I/O操作命令，如read和write命令，这样用户即可利用这些数据结构及操作命令来进行数据输入或输出，而无需关心I/O是如何具体实现的 

换言之，在裸机上铺设的I/O软件**隐藏**了I/O设备的具体细节，向上提供了一组**抽象的I/O设备**  

通常，**把覆盖了上述软件的机器称为扩充机器或虚拟机**。**它向用户提供了一个对硬件操作的抽象模型**  

同理，为了方便用户使用文件系统，又可在第一层软件(I/O管理软件)上再覆盖一层用于文件管理的软件，由它来实现对文件操作的细节，并向上一层提供一组实现对文件进行存取操作的数据结构即命令。  

亦即，文件管理软件实现了对硬件资源操作的第二个层次的抽象。以此类推，如果在文件管理软件上再覆盖一层面向用户的窗口软件，则用户便可在窗口环境下方便地使用计算机，从而形成一台功能更强的虚机器  

由此可见，OS是铺设在计算机硬件上的**多层软件的集合**，它们不仅**增强**了系统的功能，还**隐藏**了对硬件操作的具体细节，实现了对计算机硬件操作的多个层次的**抽象模型**  

# 操作系统的发展过程
## 未配置操作系统的计算机系统
### 1.人工操作方式
早期的操作方式是由程序员将事先已穿孔的纸带，装入纸带输入级，再启动它们将纸带上的程序和数据输入到计算机，然后启动计算机运行。仅当程序运行完毕并取走计算结果后，才允许下一个用户上机。这种操作方式有如下两方面缺点：  
1. **用户独占全机**，即一台计算机的全部资源由上机用户所独占  
2. **CPU等待人工操作**，当用户在进行装带、卸带的时候，CPU及内存等资源是空闲的
 
可见，人工操作方式严重降低了计算机资源的利用率，即所谓的人机矛盾。虽然CPU的速度在迅速提高，但是I/O设备的速度却提高缓慢，这使得CPU与I/O设备之间的速度**不匹配**。为此，曾出现了通道技术、缓冲技术，然而都未能很好地解决了上述矛盾，直到后来引入了脱机输入/输出技术，才获得相对满意的结果  
### 2.脱机输入/输出方式
该技术是事先将装有用户程序和数据的纸带装入**纸带输入机**，在一台外围机的控制下，把纸带上的数据输入到**磁带**上。当CPU需要这些程序和数据时，再从磁带上高速地调入内存  

类似地，当CPU需要输出时，可先由CPU把数据直接从内存高速地输送到磁带上，然后在另一台外围机的控制下，再将磁带上的结果通过相应的输出设备输出  

由于程序和数据的输入和输出都是在外围机的控制下完成的，或者说，它们是在**脱离主机**的情况下进行的，故称为脱机输入/输出方式。反之，把在主机的直接控制下进行输入/输出的方式称为联机输入/输出方式  

这种脱机I/O方式的主要优点是：
1. **减少了CPU的空闲时间**。装带、卸带操作都是在脱机情况下由外围机完成的，并不占用主机时间，从而有效地减少了CPU的空闲时间  

2. **提高了I/O速度**。当CPU在运行时需要输入数据时，是直接从高速的磁带上将数据输入到内存的，这便极大地提高了I/O速度，从而减少了CPU的空闲时间  

## 单道批处理系统
### 1.单道批处理系统(Simple Batch Processing System)的处理过程
为实现对作业的连续处理，需要先把一批作业以脱机方式输入到磁带上，并在系统中配上监督程序(monitor)，在它的控制下，使这批作业能一个接一个地连续处理。  

其处理过程：首先由监督程序将磁带上的第一个作业装入内存，并把运行控制权交给作业，待作业完成完毕后，又将控制权**交还**给监督程序，再由监督程序把下一个作业调入内存，直至磁带上的作业全部执行完成。这就形成了早期的单道批处理系统。虽然系统对作业的处理是成批进行的，但是在内存中始终只保持**一道作业**，故称为单道批处理系统  

### 2.单道批处理系统的缺点
单道批处理系统的最大缺点是：系统的资源得不到充分的利用。这是因为在内存中仅有一道程序，每逢改程序在运行中发出**I/O请求**后，CPU便处于**等待**状态，必须在其I/O完成后才继续运行。又因I/O设备的低速性，所以CPU的利用率更加低

## 多道批处理系统(Multiprogrammed Batch Processing System)
### 1.基本概念
为了进一步提高**资源的利用率**和**系统吞吐量**，引入了多道程序设计技术，由此形成了多道批处理系统。  

在该系统中，用户提交的作业先存放在外存上，并排成一个队列，称为“后备队列”。然后由作业调度程序按一定的算法，从后备队列中选择若干个作业调入内存，使它们共享CPU和系统中的各种资源。  
由于**同时**在内存中装有若干道程序，这样便可以在运行程序A时，利用其因I/O操作而暂停执行时的CPU**空档时间**，**再调度**另一道程序B运行，同样可以利用程序B在I/O操作时CPU的空档时间，再调度程序C运行，使多道程序**交替**地运行，这样便可以保持CPU处于忙碌状态  
### 2.多道批处理系统的优缺点
1. **资源利用率高**。  

2. **系统吞吐量大**。CPU和其他资源保持“忙碌”状态，仅当作业完成时或运行不下去时才进行切换，系统开销小
3. **平均周转时间长**。由于作业要排队依次进行处理，因而作业的周转时间较长，通常需要几个小时，甚至几天  
4. **无交互能力**。用户一旦把作业提交给系统后，直至作业完成，用户都不能与自己的作业进行交互，修改和调试程序极不方便  
### 3.多道批处理系统需要解决的问题
1. **处理机争用问题**。既要能满足各道程序运行的需要，又要能提高处理机的利用率  

2. **内存分配和保护问题**。系统应能为每个程序分配必要的内存空间，使它们“各得其所”，且不会因某道程序出现异常情况而破坏其他的程序
3. **I/O设备分配问题**。系统应采取适当的策略来分配系统中的I/O设备，以达到既能方便用户对设备的使用，又能提高设备利用率的目的  
4. **文件的组织和管理问题**。
5. **作业管理问题**。应能对系统中所有的作业进行合理的组织，以满足这些作业用户的不同要求  
6. **用户与系统的接口问题**。OS应提供用户与OS之间的接口

我们可把操作系统定义为：**操作系统是一组能有效地组织和管理计算机硬件和软件资源，合理地对各类作业进行调度，以及方便用户使用的程序的集合**